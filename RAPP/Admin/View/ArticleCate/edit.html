<extend name="Include:mother" /><block name="content">    <div class="u-breadcrumb">        <a class="back" href="javascript:history.back()" ><span class="fa fa-chevron-left"></span> 后退</a>        <a class="back" href="javascript:window.location.reload()" ><span class="fa fa-repeat"></span> 刷新</a>        <span class="name">编辑分类</span>    </div>    <div class="h15"></div>    <div class="nav nav-tabs" role="tablist">        <a class="nav-item nav-link active" data-toggle="tab" href="#nav-1" role="tab" aria-selected="true">基本信息</a>        <a class="nav-item nav-link" data-toggle="tab" href="#nav-2" role="tab" aria-selected="false">附加值</a>    </div>    <div class="h15"></div>    <form method="post" enctype="multipart/form-data">        <input name="id" type="hidden" value="{$page.id}" />        <div class="tab-content">            <div class="tab-pane fade show active" id="nav-1" role="tabpanel">                <div class="form-group">                    <label><span class="text-danger">* </span>分类名称</label>                    <div class="form-inline">                        <input type="text" class="form-control mr-2" name="name_cn" placeholder="分类名称" style="width:400px;" value="{$page.name_cn}" />                    </div>                    <small class="form-text text-muted"></small>                </div>                <div class="form-group">                    <label>英文名称</label>                    <div class="form-inline">                        <input type="text" class="form-control mr-2" name="name_en" placeholder="英文名称" style="width:400px;" value="{$page.name_en}" />                    </div>                    <small class="form-text text-muted"></small>                </div>                <div class="form-group">                    <label>缩略图</label>                    <include file="Include/upload_img_one" inputid="upload_img_one" inputname="thumb" inputvalue="$page.thumb" size="6" tip="" />                    <small class="form-text text-muted"></small>                </div>            </div>            <div class="tab-pane fade show" id="nav-2" role="tabpanel">                <div class="mod_cate_edit_001">                    <div class="form-inline">                        字段名(中文)：<input class="form-control form-control-sm w-80 mr-3" type="text" id="title" />                        字段标识(en)：<input class="form-control form-control-sm w-80 mr-3" type="text" id="identify" />                        组件类型：                        <select class="form-control form-control-sm mr-3" id="widget">                            <volist name="widget" id="vo">                                <option value="{$vo.identify}">{$vo.name}</option>                            </volist>                        </select>                        是否需要真实字段：                        <select class="form-control form-control-sm mr-3" id="need_real_fields">                            <option value="0">不需要</option>                            <option value="1">需要</option>                        </select>                        字段备注：<input class="form-control form-control-sm w-80 mr-3" type="text" id="remark" />                        <button class="btn btn-sm btn-primary" id="btn_add_attr" type="button">新增</button>                    </div>                    <div class="h10"></div>                    <table class="table table-bb">                        <tr>                            <th>ID</th>                            <th>字段名</th>                            <th>字段标识</th>                            <th>组件类型</th>                            <th>是否需要真实字段</th>                            <th>字段备注</th>                            <th width="140">操作</th>                        </tr>                        <volist name="attrlist" id="vo">                            <tr class="tr_{$vo.id}">                                <td>{$vo.id}</td>                                <td>{$vo.title}</td>                                <td>{$vo.identify}</td>                                <td>{$vo.widget}</td>                                <td>{$vo.need_real_fields}</td>                                <td>{$vo.remark}</td>                                <td>                                    <a class="blue" href="{:U('ArticleAttr/edit',array('id'=>$vo['id'],'cateid'=>$_GET['id']))}">编辑</a>&nbsp;&nbsp;&nbsp;                                    <a class="blue" action-href="{:U('ArticleAttr/delete',array('id'=>$vo['id'],'cateid'=>$_GET['id']))}" href="#" onclick="delete_attr(this);">删除</a>                                </td>                            </tr>                        </volist>                    </table>                </div>                <script>                    (function(){                        $("#btn_add_attr").click(function(){                            var $data = {                                title:$("#title").val(),                                identify:$("#identify").val(),                                widget:$("#widget").val(),                                need_real_fields:$("#need_real_fields").val(),                                remark:$("#remark").val(),                                cateid:$("input[name=id]").val(),                            };                            var url = "{:U('ArticleCate/edit',array('id' =>$_GET['id'],'on'=>1))}";                            $.ajax({                                type:"post",                                url:"{:U('ArticleCate/ajax_add_attr')}",                                data:$data,                                success:function(data){                                    if(data['status']){                                        window.location = url;                                    }                                }                            });                        });                    })();                </script>            </div>        </div>        <button type="submit" class="btn btn-primary">保存</button>    </form>    <script type="text/javascript">        function delete_attr(self){            $boot.confirm({text:"确定删除？"},function(){                window.location = $(self).attr('action-href');            });        }    </script>    <notempty name="Think.get.on">        <script>            var on_tag = "{$Think.get.on|default=0}";            $(".nav-item").removeClass('active').eq(on_tag).addClass('active');            $(".tab-pane").removeClass('active').eq(on_tag).addClass('active');        </script>    </notempty></block>