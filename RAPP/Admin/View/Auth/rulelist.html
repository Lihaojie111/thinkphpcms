<extend name="Include:mother" /><block name="content"><div class="g_tab">	<div class="title">规则列表</div></div><div class="g_operation">	<div class="lft">		筛选：&nbsp;		<a class="blue" href="{:U('Auth/rulelist')}">全部</a>&nbsp;&nbsp;		<a class="blue" href="{:U('Auth/rulelist',array('status'=>0))}">禁用</a>&nbsp;&nbsp;		<a class="blue" href="{:U('Auth/rulelist',array('status'=>1))}">开启</a>&nbsp;&nbsp;	</div>	<div class="rgt">		<div class="btn_group">			<dl>				<dd><a href="{:U('Auth/ruleadd')}">新增规则</a></dd>			</dl>			<div class="clear"></div>		</div>	</div>	<div class="clear"></div></div><notempty name="rulelist"><table class="g_list">    <thead>        <tr>			<th width="60">ID</th>			<th width="280">规则名</th>			<th>规则值</th>			<th>类型</th>			<th>状态</th>			<th>操作</th>		</tr>    </thead>    <tbody>       	<volist name="rulelist" id="vo">			<tr class="tr_{$vo.id}">				<td>{$vo.id}</td>				<td>{$vo.title}</td>				<td>					<if condition="$vo.type eq 0">						{$vo.name}					<else />						{$vo.condition}					</if>				</td>				<td>					{$vo.type}				</td>				<td>					<eq name="vo.status" value="1">						开启					<else />						禁用					</eq>				</td>				<td>					<a href="{:U('Auth/ruleedit')}?id={$vo.id}">编辑</a>&nbsp;&nbsp;&nbsp;					<eq name="vo.status" value="1">						<a href="#" onclick="return forbidden({$vo.id})">禁用</a>&nbsp;&nbsp;&nbsp;					</eq>					<eq name="vo.status" value="0">						<b>已禁用</b>&nbsp;&nbsp;&nbsp;						<a href="#" onclick="return open_rule({$vo.id})">开启</a>&nbsp;&nbsp;&nbsp;					</eq>					<a href="#" onclick="return del({$vo.id})">删除</a>				</td>			</tr>		</volist>    </tbody></table><else />	<div class="g_nodata">暂无数据！</div></notempty>	<div class="g_pages">	{$pages}</div><script>	//ajax删除规则	function del($id){		$k.dialog({text:'确认删除？'},function(){			$.ajax({				type:"post",			    url: "{:U('Auth/ajax_ruledel')}",			    data: {id:$id},			    success: function(data){				   if(data)				   {				   		$k.text({text:'删除成功！',delay:1200});				   		$(".tr_"+$id).remove();				   }else				   {				   		$k.text({text:'删除失败！',delay:1200});				   }			   				   				   }			});		});		return false;	}	//ajax禁用规则	function forbidden($id){		$k.dialog({text:'确认禁用？'},function(){			$.ajax({				type:"post",			    url: "{:U('Auth/ajax_ruleforbidden')}",			    data: {id:$id},			    success: function(data){				   if(data)				   {				   		$k.text({text:'成功禁用！',delay:1200},function(){							window.location = window.location;				   		});				   }			   				   				   }			});		});		return false;	}	//ajax开启规则	function open_rule($id){		$k.dialog({text:'确认开启？'},function(){			$.ajax({				type:"post",			    url: "{:U('Auth/ajax_ruleopen')}",			    data: {id:$id},			    success: function(data){				   if(data)				   {				   		$k.text({text:'成功开启！',delay:1200},function(){							window.location = window.location;				   		});				   }			   				   				   }			});		});		return false;	}</script> <style></style></block>