<extend name="Include:mother" /><block name="content">    <div class="u-breadcrumb">        <a class="back" href="javascript:history.back()" ><span class="fa fa-chevron-left"></span> 后退</a>        <a class="back" href="javascript:window.location.reload()" ><span class="fa fa-repeat"></span> 刷新</a>        <span class="name">新增文章</span>    </div>    <div class="h15"></div>    <div class="nav nav-tabs" role="tablist">        <a class="nav-item nav-link active" data-toggle="tab" href="#nav-1" role="tab" aria-selected="true">基本信息</a>        <a class="nav-item nav-link" data-toggle="tab" href="#nav-2" role="tab" aria-selected="false">附加值</a>        <a class="nav-item nav-link" data-toggle="tab" href="#nav-3" role="tab" aria-selected="false">seo设置</a>    </div>    <div class="h15"></div>    <form method="post" enctype="multipart/form-data">        <input name="id" type="hidden" value="{$page.id}" />        <div class="tab-content">            <div class="tab-pane fade show active" id="nav-1" role="tabpanel">                <div class="form-group">                    <label><span class="text-danger">* </span>文章分类</label>                    <select class="form-control" name="cate_id" id="itemsids" style="width:400px;" disabled>                        <volist name="catelist" id="item">                            <option value="{$item.id}" <eq name="item.id" value="$page.cate_id">selected</eq> <neq name="item.is_able" value="1">disabled="1"</neq>>                            {$item.pre}{$item.name_cn}                            </option>                        </volist>                    </select>                    <small class="form-text text-muted"></small>                </div>                <div class="form-group">                    <label for="title"><span class="text-danger">* </span>文章标题</label>                    <div class="form-inline">                        <input type="text" class="form-control mr-2" id="title" name="title" placeholder="文章标题" style="width:400px;" value="{$page.title}" />                        <input type="text" id="colorpicker" name="title_color" value="{$page.title_color}"/>                    </div>                    <small class="form-text text-muted">1-100个字符</small>                </div>                <div class="form-group">                    <label>跳转地址</label>                    <div class="form-inline">                        <input type="text" class="form-control" name="url" placeholder="跳转地址" style="width:400px;" value="{$page.url}" />                    </div>                    <small class="form-text text-muted">以http://开头，填写后文章将重定向到该地址</small>                </div>                <div class="form-group">                    <label>缩略图</label>                    <include file="Include/upload_img_one" inputid="upload_img_one" inputname="thumb" inputvalue="{$page.thumb}" size="6" tip="" />                    <small class="form-text text-muted"></small>                </div>                <div class="form-group">                    <label>发布时间</label>                    <include file="Include/picker_datetime" inputname="created_at" placeholder="发布时间" inputvalue="{$page.created_at|date='Y-m-d H:i',###}" />                    <small class="form-text text-muted"></small>                </div>                <div class="form-group">                    <label>浏览量</label>                    <div class="form-inline">                        <input type="text" class="form-control" name="click" placeholder="浏览量" style="width:400px;" value="{$page.click}" />                    </div>                    <small class="form-text text-muted"></small>                </div>                <div class="form-group">                    <label>文章详情</label>                    <include file="Include/ueditor_full" inputname="body" inputvalue="{$page.body}"/>                    <small class="form-text text-muted"></small>                </div>            </div>            <div class="tab-pane fade show" id="nav-2" role="tabpanel">                <input type="hidden" name="extattr" value="">                <volist name="attrlist" id="vo">                    <eq name="vo.widget" value="input_text">                        <div class="form-group">                            <label>{$vo.title}</label>                            <div class="form-inline">                                <input type="text" class="form-control attr_serialize" name="{$vo.identify}" placeholder="{$vo.title}" data-title="{$vo.title}" data-widget="{$vo.widget}" value="{$vo.value}" style="width:400px;" />                            </div>                            <small class="form-text text-muted">{$vo.remark}</small>                        </div>                    </eq>                    <eq name="vo.widget" value="textarea">                        <div class="form-group">                            <label>{$vo.title}</label>                            <div class="form-inline">                                <textarea style="width:600px;" name="{$vo.identify}" class="form-control attr_serialize" data-title="{$vo.title}"  data-widget="{$vo.widget}">{$vo.value}</textarea>                            </div>                            <small class="form-text text-muted">{$vo.remark}</small>                        </div>                    </eq>                </volist>            </div>            <div class="tab-pane fade show" id="nav-3" role="tabpanel">                <div class="form-group">                    <label>关键词</label>                    <div class="form-inline">                        <input type="text" name="keywords" class="form-control" style="width:600px;" value="{$page.keywords}"/>&nbsp;<a class="blue" href="#" onclick="return split_words();">生成关键词</a>                    </div>                    <small class="form-text text-muted">使用“生成关键词”功能请先确认文章标题已填写</small>                </div>                <div class="form-group">                    <label>描述</label>                    <div class="form-inline">                        <textarea name="description" class="form-control" rows="5" style="width:600px;">{$page.description}</textarea>                    </div>                </div>            </div>        </div>        <button type="submit" class="btn btn-primary">保存</button>    </form>    <script>        //颜色选择器        $("#colorpicker").spectrum();        //提交前保存附加字段        $("button[type=submit]").click(function(){            //var array_serialize = $(".attr_serialize").serializeArray();            var $array = [],$json = {};            var attr_data = $(".attr_serialize").not(".edui-default");            for(i=0;i<attr_data.length;i++){                $json['title'] = attr_data.eq(i).attr('data-title');                $json['identify'] = attr_data.eq(i).attr('name');                $json['widget'] = attr_data.eq(i).attr('data-widget');                $json['value'] = attr_data.eq(i).val();                $array.push($json);                $json = {};            }            var str = JSON.stringify($array);            $("input[name=extattr]").val(str);        });        //关键字分词        function split_words(){            $title = $("input[name=title]").val();            if($title == ''){                $boot.warn({text:"请先输入文章标题！"});                return false;            }            $.ajax({                type:"post",                url:"{:U('Common/ajax_split_words')}",                data:{word:$title},                success:function(data){                    if(data['status']){                        $("input[name=keywords]").val(data['keyword']);                    }                }            });            return false;        }    </script></block>