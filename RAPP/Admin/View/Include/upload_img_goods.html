<div id="[inputid]" class="upload_img_group">	<div class="upload_img_group_up">		<ul>			<li class="default">				<img src="__PUBLIC__/Admin/images/nopicture.png" width="100" />				<span class="size"></span>				<a class="prev" href="#">‹</a>				<a class="next" href="#">›</a>				<a class="delete" href="#">×</a>				<input class="thumb_path" type="hidden" name="[inputname][]" value="" />			</li>			<volist name="page.[inputname]" id="vo">				<li>					<img src="{$vo}" width="100" />					<a class="prev" href="#">‹</a>					<a class="next" href="#">›</a>					<a class="delete" href="#">×</a>					<input class="thumb_path" type="hidden" name="[inputname][]" value="{$vo}" />				</li>			</volist>		</ul>		<div class="clear"></div>	</div>    <div class="mod-piclist-upload">        <div class="left">            <label id="upload_[inputid]" class="u-dmuploader">                <span role="button" class="btn btn-sm btn-primary"><span class="fa fa-upload"></span> 上传图片</span>                <input type="file" class="dis_none" multiple="true" />            </label>        </div>        <div class="right">            <span class="tip">格式支持jpg、png、gif，图片大小&lt;[size]MB[tip]，上传后添加图片到缩略图</span>        </div>        <div class="clear"></div>    </div>    <div class="upload_img_bank">        <div class="contain">            <ul>                <volist name="piclist" id="vo">                    <li>                        <div class="pic" onclick="return detail({$vo.width},{$vo.height},'{$vo.path}','{$vo.addtime|date='Y-m-d H:i:s',###}')">                            <div class="pic_in">                                <img src="{$vo.path}" width="100" />                            </div>                            <div class="size">{$vo.width}×{$vo.height}</div>                            <a class="add"                               onclick="return add_group[inputid](event,'{$vo.path}','{$vo.width}','{$vo.height}');">+</a>                        </div>                    </li>                </volist>            </ul>            <div class="clear"></div>        </div>    </div></div><!--展开图片详情--><div class="plug_piclist_win">	<img class="main" src="" />	<div class="info">		<ul>			<li>				<div class="head">图片地址</div>				<div id="pic_path" class="con"></div>			</li>			<li>				<div class="head">上传时间</div>				<div id="pic_time" class="con"></div>			</li>		</ul>		<a class="close">×</a>	</div></div><script>	function detail(w,h,p,t){		w_old = w;		var h_max = $(window).height()>$('html').height()?$(window).height():$('html').height();		if(w>$(window).width()-240){			w = $(window).width()-280;			h = Math.floor(h*w/w_old);		}		if(h+140>h_max){			h_old = h;			h = h_max-160;			w = Math.floor(w*h/h_old);		}		var lft = ($(window).width()-w-240)/2;		//h_max = h_max>h+40?h_max:h+40;		var $lock = lock();		$(".plug_piclist_win").css({display:'block',width:w,height:h,left:lft,top:100+$(window).scrollTop()});		$(".plug_piclist_win").find(".info").css({height:h+20});		$(".plug_piclist_win").find("img.main").css({width:w,height:h}).attr("src",p);		$("#pic_path").text(p);		$("#pic_time").text(t);		function lock(h){			return $("<div class='opacity_2'></div>").css({width:'100%',height:h_max,background:'#000',position:'absolute',left:0,top:0}).appendTo('body');		}		$(".plug_piclist_win .info a.close").click(function(){			$lock.remove();			$(".plug_piclist_win").hide();		});	}</script><notempty name="page.[inputname]">	<script>		$("#[inputid] .upload_img_group_up li.default").hide();		$("#[inputid] .upload_img_group_up li:gt(0)").children().show();	</script></notempty><script type="text/javascript">	function add_group[inputid](event,$path,$width,$height){		event.stopPropagation();		var $mid_size = "[mid_size]",$min_size = "[min_size]";		$.ajax({			type:"post",			url:"{:U('Goods/ajax_goods_thumb')}",			data:{path:$path,mid_size:$mid_size,min_size:$min_size},			success:function(data){				if(data['status']){					$a = $("#[inputid] .upload_img_group_up .default").clone(true).removeClass('default').show();					$a.children().css({'display':'inline-block'});					$a.find('.size').text($width+"×"+$height);					$a.find('img').attr('src',$path);					$a.find(".thumb_path").val($path);					$a.appendTo('#[inputid] .upload_img_group_up ul');					$("#[inputid] .upload_img_group_up li.default").hide();				}			}		});		return false;	};	//删除当前选中缩略图	$("#[inputid] .upload_img_group_up a.delete").click(function(){		$(this).parent().remove();		var len = $("#[inputid] .upload_img_group_up li").length;		if(len == 1){			//alert($("#[inputid] .upload_img_group_up li.default").length);			$("#[inputid] .upload_img_group_up li.default").show();		}		return false;	});	//图片前移	$("#[inputid] .upload_img_group_up a.prev").click(function(){		var $index = $(this).parent().prevAll().length;		if($index != 1){			var $target = $(this).parent().prev();			$(this).parent().insertBefore($target);		}		return false;	});	//图片后移	$("#[inputid] .upload_img_group_up a.next").click(function(){		var $index = $(this).parent().nextAll().length;		if($index != 0){			var $target = $(this).parent().next();			$(this).parent().insertAfter($target);		}		return false;	});	//初始化上传uploadify	var $size = [size];  //单位：M    //插件地址：https://github.com/danielm/uploader    $('#upload_[inputid]').dmUploader({        url: '{:U("Common/upload_pic_goods")}',        dataType: 'json',        maxFileSize : $size*1024*1024,  //允许上传的大小，单位KB        allowedTypes: 'image/*',        multiple:false,        extraData:{            '{:session_name()}' : '{:session_id()}'    },    onComplete: function(){        //$.danidemo.addLog('#demo-debug', 'default', 'All pending tranfers completed');        console.log('All pending tranfers completed');    },    onUploadProgress: function(id, percent){        //var percentStr = percent + '%';        //$.danidemo.updateFileProgress(id, percentStr);    },    onUploadSuccess: function(id, res){        if(res.status == 1){            var $li = $('<li class=li_'+res.id+'><div class="pic" onclick="return detail('+res.width+','+res.height+',\''+res.path+'\',\''+res.addtime_format+'\')"><div class="pic_in"><img src="'+res.path+'" width="100" /></div><div class="size">'+res.width+'×'+res.height+'</div><a class="add" onclick="return add_group[inputid](event,\''+res.path+'\',\''+res.width+'\',\''+res.height+'\');">+</a></div></li>');            $li.prependTo('#[inputid] .upload_img_bank .contain ul');        } else {            $boot.error($data.info);        }    },    onUploadError: function(id, message){    },    onFileTypeError: function(file){    },    onFileSizeError: function(file){    },    onFileExtError: function(file){    },    onFallbackMode: function(message){    }    });</script>