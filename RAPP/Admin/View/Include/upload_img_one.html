<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><div id="[inputid]" class="upload_img_one">	<div class="upload_img_one_left">		<div class="pic">			<empty name="page.[inputname]">				<img src="__PUBLIC__/Admin/images/nopicture.png" width="100" />				<else/>				<img src="{$page.[inputname]}" width="160" />			</empty>			<span class="size"></span>			<a class="delete" href="#" data="__PUBLIC__/Admin/images/nopicture.png">×</a>		</div>		<input class="thumb_path" type="hidden" name="[inputname]" value="[inputvalue]" />        <label id="upload_[inputid]" class="u-dmuploader">            <span role="button" class="btn btn-sm btn-primary w-100 mt-1"><span class="fa fa-upload"></span> 上传图片</span>            <input type="file" class="dis_none" />        </label>	</div>	<div class="upload_img_one_right">		<div class="tip">格式支持jpg、png、gif，图片大小&lt;[size]MB[tip]</div>		<div><a class="blue hide_btn" href="#">地址图片</a></div>		<div class="add_block">			<input class="text add_text" type="text" value="" />			<div class="add_btn">添加</div>		</div>	</div>	<div class="clear"></div></div><script type="text/javascript">	//显示-隐藏 缩略图地址添加	$("#[inputid] .upload_img_one_right a.hide_btn").click(function() {	    var $this = $(this);		if($this.text() == '地址图片') {            $this.parent().siblings('.add_block').show();            $this.text('收起');		} else {            $this.parent().siblings('.add_block').hide();            $this.text('地址图片');		}		return false;	});	//添加缩略图地址	$(".upload_img_one_right .add_btn").click(function(){	    var $this = $(this);		var $val = $this.siblings('.add_text').val();		if($.trim($val) != '') {			$("#[inputid] .upload_img_one_left .pic").find('img').attr({'src':$val});			$("#[inputid] .thumb_path").val($val);		}	});	//删除当前选中缩略图	$("#[inputid] .upload_img_one_left .pic a.delete").click(function(){		var nopicture = $(this).attr('data');		$("#[inputid] .upload_img_one_left .pic").find('img').attr({'src':nopicture});		$("#[inputid] .thumb_path").val('');		$(".upload_img_one_left .pic span.size").hide();	});	//初始化上传uploadify	$size = [size];  //单位：M    //插件地址：https://github.com/danielm/uploader    $('#upload_[inputid]').dmUploader({        url: '{:U("Common/upload_pic_one")}',        dataType: 'json',        maxFileSize : $size*1024*1024,  //允许上传的大小，单位KB        allowedTypes: 'image/*',        multiple:false,        extraData:{            '{:session_name()}' : '{:session_id()}'        },        onComplete: function(){            //$.danidemo.addLog('#demo-debug', 'default', 'All pending tranfers completed');            console.log('All pending tranfers completed');        },        onUploadProgress: function(id, percent){            //var percentStr = percent + '%';            //$.danidemo.updateFileProgress(id, percentStr);        },        onUploadSuccess: function(id, res){            if(res.status == 1){                $("#[inputid] .upload_img_one_left .pic").find('img').attr({'src':res.path});                $("#[inputid] .upload_img_one_left .pic .size").text(res.width+"×"+res.height).show();                $("#[inputid] .thumb_path").val(res.path);            } else {                $boot.error($data.info);            }        },        onUploadError: function(id, message){        },        onFileTypeError: function(file){        },        onFileSizeError: function(file){        },        onFileExtError: function(file){        },        onFallbackMode: function(message){        }    });</script>