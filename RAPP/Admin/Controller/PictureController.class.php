<?phpnamespace Admin\Controller;use Admin\Controller\RootController;class PictureController extends RootController{		public function index(){		//echo 333;	}	/**	 * 图片库列表	 */	public function piclist(){		$Picture = M('Picture');		$where['status'] = 1;		$count = $Picture->where($where)->count();		$Page = new \Think\Page($count,30);		$show = $Page->show();		$piclist = $Picture->where($where)->field(true)->order('addtime desc')->limit($Page->firstRow.','.$Page->listRows)->select();		foreach($piclist as $key =>$val){			$piclist[$key]['path_min'] = img_rename($piclist[$key]['path'],'_min');			if(!file_exists('.'.$piclist[$key]['path_min'])){				$piclist[$key]['path_min'] = null;			}					}		$this->assign('piclist',$piclist);		$this->assign('pages',$show);		$this->display();	}	/**	 * 图片回收站列表	 */	public function piclist_rubbish(){		$Picture = M('Picture');		$where['status'] = 0;		$count = $Picture->where($where)->count();		$Page = new \Think\Page($count,30);		$show = $Page->show();		$piclist = $Picture->where($where)->field(true)->order('addtime desc')->limit($Page->firstRow.','.$Page->listRows)->select();		$this->assign('piclist',$piclist);		$this->assign('pages',$show);		$this->display();	}	/**	 * 删除一张图片	 */	public function delete_one(){		if(D('Picture')->delete_one($_GET['id'])){			$this->success('删除成功！');		}else{			$this->error('删除出错！');		}	}	/**	 * ajax删除一张图片	 */	public function ajax_delete_one(){		if(D('Picture')->delete_one($_POST['id'])){			$this->ajaxReturn(array('status'=>1));		}else{			$this->ajaxReturn(array('status'=>0));		}	}	/**	 * 删除图片组	 */	public function delete(){		if(D('Picture')->delete($_POST['ids'])){			$this->success('删除成功！');		}else{			$this->error('删除出错！');		}	}	/**	 * 彻底删除一张图片	 */	public function absolute_delete_one(){		if(D('Picture')->absolute_delete_one($_GET['id'])){			$this->success('清除成功！');		}else{			$this->error('清除出错！');		}	}	/**	 * ajax清除一张图片	 */	public function ajax_absolute_delete_one(){		if(D('Picture')->absolute_delete_one($_POST['id'])){			$this->ajaxReturn(array('status'=>1));		}else{			$this->ajaxReturn(array('status'=>0));		}	}	/**	 * 彻底删除图片组	 */	public function absolute_delete(){		if(D('Picture')->absolute_delete($_POST['ids'])){			$this->success('清除成功！');		}else{			$this->error('清除出错！');		}	}	/**	 * 清空图片组	 */	public function ajax_clear(){		if(D('Picture')->clear()){			$this->ajaxReturn(array('status'=>1));		}else{			$this->ajaxReturn(array('status'=>0));		}	}}