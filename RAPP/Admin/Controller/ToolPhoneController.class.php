<?phpnamespace Admin\Controller;use Admin\Controller\RootController;class ToolPhoneController extends RootController{	public function index(){	}	/**	 *单页列表	 *@create 2014-12-19	 *@author zjf	 */	public function lists(){		//主数据		$list = M('ToolPhone')->field(true)->order('sort,id')->select();		$this->assign('list',$list);		$this->display();		}	/**	 *添加文章	 *@create 2014-12-19	 *@author zjf	 */	public function add(){		if(IS_POST){			$res = D('ToolPhone')->add_item($_POST);			if(!$res['status']){				$this->error($res['error']);			}else{				$this->redirect('ToolPhone/lists',array('cate_id'=>$_POST['pid']),2,'恭喜你，发布成功！');			}		}else{			$this->display();		}	}	/**	 *编辑文章	 *@create 2014-12-19	 *@author zjf	 */	public function edit(){		if(IS_POST){			$res = D('ToolPhone')->save_item($_POST);			if(!$res){				$this->error($res['error']);			}else{				$this->redirect('ToolPhone/lists',array_decode($_GET['jump_url']),2,'编辑成功！');			}		}else{			$res = D('ToolPhone')->get_item(array('id'=>$_GET['id']),0);			//$res['body'] = htmlspecialchars_decode($res['body']);			$this->assign('page',$res);			$this->display();		}	}	/**	 *ajax进行分词	 *@create 2015-1-13	 *@author zjf	 */	public function ajax_split_words(){		$pa = new \Vendor\phpanalysis\phpanalysis();		$pa->SetSource($_POST['title']);		//设置分词属性		$pa->resultType = 2;		$pa->differMax  = true;		$pa->differFreq = true;		$pa->StartAnalysis();		//获取你想要的结果		$b = $pa->GetFinallyResult(',');		$key=trim($b,',');		if($key){			$this->ajaxReturn(array('status'=>1,'keywords'=>$key));		}else{			$this->ajaxReturn(array('status'=>0));		}	}	/**	 *ajax设置状态	 *@create 2014-12-19	 *@author zjf	 */	public function ajax_set_is_show(){		$res = D('ToolPhone')->save_item(array('id'=>$_POST['id'],'is_show'=>$_POST['val']));		$this->ajaxReturn($res['status']);	}	/**	 *ajax删除文章	 *@create 2014-12-19	 *@author zjf	 */	public function ajax_del(){		$res = D('ToolPhone')->del_item(array('id'=>$_POST['id']));		$this->ajaxReturn($res);	}	/**	 *ajax设置排序	 *@create 2014-12-16	 *@author zjf	 */	public function ajax_setsort(){		$data['id'] = $_POST['id'];		$data['sort'] = $_POST['sort'];		$res = D('ToolPhone')->save_item($data);		$this->ajaxReturn($res);	}}