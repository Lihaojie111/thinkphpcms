<?phpnamespace Admin\Controller;use Admin\Controller;class SettingController extends RootController{    /**     * 配置首页     * @create 2014-12-17     * @author zjf     */    public function index(){        if (IS_POST) {            foreach ($_POST as $key => &$val) {                M("Setting")->where(array('key' => $key))->setField('value', $val);            }            $this->success('更新成功！');        } else {            $setlist = M('Setting')->order('type,sort,id')->select();            $this->assign('setlist', $setlist);            $this->display();        }    }    /**     *新增字段     * @create 2014-12-17     * @author zjf     */    public function add(){        if (IS_POST) {            $res = M('Setting')->add($_POST);            if ($res) {                $this->redirect('Setting/index',[],1,'添加成功！');            } else {                $this->error('添加失败！');            }        } else {            $this->display();        }    }    /**     *编辑字段     * @create 2014-12-17     * @author zjf     */    public function edit()    {        if (IS_POST) {            $res = M('Setting')->save($_POST);            if (false !== $res) {                $this->redirect('Setting/index',[],1,'编辑成功！');            } else {                $this->error('编辑失败！');            }        } else {            $page = M('Setting')->find($_GET['id']);            $this->assign('page', $page);            $this->display();        }    }    /**     *ajax删除字段     * @create 2014-12-17     * @author zjf     */    public function ajax_del()    {        $res = D('Setting')->del_item(array('id' => $_POST['id']));        $this->ajaxReturn($res);    }}