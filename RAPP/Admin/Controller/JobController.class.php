<?phpnamespace Admin\Controller;use Think\Controller;class JobController extends RootController{	public function joblist(){		$joblist = M('Job')->field(true)->order('is_show desc,update_time desc')->select();		$this->assign('joblist',$joblist);		$this->display();	}	public function developlist(){		$developlist = M('Develop')->order('id desc')->select();		$this->assign('joblist',$developlist);		$this->display();	}	public function add(){		$this->display();	}	public function do_add(){		$_POST['publish_time']=strtotime($_POST['publish_time'].' '.date('H:i:s'));		$_POST['update_time']=time();		$res = M("Job")->data($_POST)->add();		if(!$res){			$this->error('对不起，发布失败！');		}else{			$this->success('恭喜你，发布成功！','Job/add');		}	}	public function edit(){		$page = D('Job')->getRow($_GET['id']);		$this->assign('page',$page);		$this->display();	}	public function do_edit(){		$_POST['publish_time']=strtotime($_POST['publish_time'].' '.date('H:i:s'));		$_POST['update_time']=time();		$res = M("Job")->data($_POST)->save();		if(!$res){			$this->error('对不起，编辑失败！');		}else{			$this->success('恭喜你，编辑成功！','Job/joblist');		}	}	public function do_delete(){		$res = D('Job')->deleteById($_GET['id']);		$this->ajaxReturn($res);	}	public function do_delete_develop(){		$res = M('Develop')->delete($_GET['id']);		$this->ajaxReturn($res);	}	public function do_shield(){		$res = D("Job")->shieldById($_GET['id']);		if(!$res){			$this->error('对不起，设置失败！');		}else{			$this->redirect('Job/joblist');		}	}	public function do_show(){		$res = D("Job")->showById($_GET['id']);		if(!$res){			$this->error('对不起，设置失败！');		}else{			$this->redirect('Job/joblist');		}	}	/**	 * 置顶	 */	public function stick(){		if(D('Job')->stick($_GET['id'])){			$this->redirect('Job/joblist');		}else{			$this->error('对不起，置顶失败！');		}	}}